<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Generador HTML CRM – Matías Stevanato</title>
  <link rel="shortcut icon" href="img/logo.png" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fuente + Bootstrap para el grid del formulario -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <!-- Incluye peso 800 para que el h1 se vea igual que en el resto -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --azul:#004b7f; 
      --azul-2:#006aa3; 
      --gris-fondo:#f5f7fa; 
      --card:#ffffff; 
      --borde:#e0e6ed;
      --verde:#1a7f37; 
      --verde-suave:#e1f3e7; 
      --amarillo:#bf8f00; 
      --amarillo-suave:#fff8e1;
      --texto:#111;
      --zoom:.90;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      background:var(--gris-fondo);
      color:var(--texto);
      font:14.5px/1.45 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    }

    .container{
      max-width:1200px;
      margin:auto;
      padding:22px 16px 40px;
    }

    /* Header + nav (alineado con reclamos) */
    header{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:16px;
      flex-wrap:wrap;
    }
    header img{
      height:48px;
      flex:0 0 auto;
    }

    /* h1 igual que en reclamos (mismo grosor y estilo) */
    h1{
      margin:0;
      color:var(--azul);
      font-size:26px;
      font-weight:800;
      line-height:1.15;
    }

    .nav{
      margin-left:auto;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .btn{
      padding:8px 12px;
      border:1px solid var(--azul-2);
      background:#fff;
      color:var(--azul-2);
      border-radius:10px;
      text-decoration:none;
      font-weight:700;
    }
    .btn:hover{
      background:var(--azul-2);
      color:#fff;
    }
    .btn.active{
      background:var(--azul-2);
      color:#fff;
      pointer-events:none;
      opacity:.92;
    }

    /* Modo celular: logo y título centrados, nav centrado (igual reclamos) */
    @media (max-width:780px){
      header{
        flex-direction:column;
        align-items:center;
        text-align:center;
      }
      header img{
        height:48px;
      }
      h1{
        font-size:20px;
      }
      .nav{
        width:100%;
        margin-left:0;
        justify-content:center;
      }
    }

    /* Secciones */
    section{margin-top:28px}
    section h2{
      margin:0 0 14px;
      color:var(--azul);
      font-size:20px;
      font-weight:700;
      border-bottom:2px solid var(--azul-2);
      padding-bottom:6px;
    }
    .section-subtitle{
      margin:4px 0 18px;
      font-size:13px;
      color:#555;
      max-width:720px;
    }

    /* === Tarjetas del generador CRM === */
    .card-soft{
      background:var(--card);
      border:1px solid var(--borde);
      border-radius:12px;
      padding:16px 16px 14px;
      box-shadow:0 1px 3px rgba(0,0,0,.06);
      margin-bottom:20px;
    }
    .card-soft h3{
      margin:0 0 10px;
      font-size:16px;
      color:var(--azul);
      font-weight:700;
    }

    .muted{
      color:#6b7280;
      font-size:12px;
      margin-bottom:6px;
    }

    label{
      font-size:14px;
      margin-bottom:4px;
      color:#111827;
    }

    .form-control,
    .form-control[type=file]{
      font-size:14px;
      border-radius:8px;
      border:1px solid var(--borde);
      background:#ffffff;
    }

    .uploader-label{
      font-weight:600;
      font-size:13px;
      white-space:nowrap;
      color:var(--texto);
      margin-bottom:4px;
    }

    .warn{
      background:#fff7ed;
      border:1px solid #fed7aa;
      color:#9a3412;
      padding:8px 10px;
      border-radius:10px;
      font-size:12px;
      margin-bottom:8px;
    }

    /* Botones del generador */
    .btn-base{
      border-radius:8px;
      font-size:13px;
      padding:8px 12px;
      border:1px solid var(--azul-2);
      background:#ffffff;
      color:var(--azul-2);
      cursor:pointer;
      transition:transform .06s, box-shadow .06s, background-color .06s, color .06s, border-color .06s;
    }
    .btn-base:hover{
      transform:translateY(-1px);
      box-shadow:0 6px 14px rgba(0,0,0,.08);
      background:#f0f9ff;
      border-color:var(--azul-2);
      color:#0f172a;
    }

    .btn-primary-maipu{
      background:linear-gradient(90deg,var(--azul),var(--verde));
      color:#ffffff;
      border-color:var(--azul);
      font-weight:600;
    }
    .btn-primary-maipu:hover{
      background:linear-gradient(90deg,var(--verde),var(--amarillo));
      border-color:var(--amarillo);
      color:#ffffff;
    }

    .btn-alt-green{
      border-color:var(--verde);
    }
    .btn-alt-green:hover{
      background:#f3fff4;
      border-color:var(--verde);
    }

    .btn-alt-orange{
      border-color:var(--amarillo);
    }
    .btn-alt-orange:hover{
      background:#fff8ed;
      border-color:var(--amarillo);
    }

    #resultHtml{
      width:100%;
      font-family:ui-monospace,Menlo,Consolas,monospace;
      padding:12px;
      border-radius:10px;
      border:1px solid var(--borde);
      background:#0b1220;
      color:#e5edf5;
      font-size:11px;
      resize:vertical;
      min-height:260px;
    }

    #status.ok{color:#10b981}
    #status.err{color:#ef4444}
    #status.muted{color:#6b7280}

    #preview{
      width:100%;
      height:640px;
      border:1px solid var(--borde);
      border-radius:10px;
      background:#ffffff;
      display:block;
    }
    header{
      .btn{font-size:14px;padding:7px 10px}
    }
@media (max-width:860px){
     
      header{
      .btn{font-size:14px;padding:7px 10px}
    }
    @media (max-width:767.98px){
      #preview{
        height:520px;
      }
    }

    footer{
      padding:8px 0 0;
      font-size:11px;
      color:#6b7280;
      text-align:left;
    }

    /* Escala global 90% como en métricas */
    html { zoom: var(--zoom); }
    @supports not (zoom: 1) {
      html, body { overflow-x: hidden; }
      body {
        transform: scale(var(--zoom));
        transform-origin: top left;
        width: calc(100% / var(--zoom));
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HEADER IGUAL QUE EL RESTO, PERO CON CRM ACTIVO -->
    <header>
      <img src="img/logo.png" alt="Logo Maipú" />
      <h1>Generador HTML para CRM</h1>
      <nav class="nav">
        <a class="btn" href="index.html">Maipú</a>
        <a class="btn" href="matias.html">Matías</a>
        <a class="btn" href="reclamos.html">Reclamos</a>
        <a class="btn active" href="crm.html">CRM</a>
      </nav>
    </header>

    <section>
      <h2>Dirección de Comunicación</h2>
      <p class="section-subtitle">
        Subí una o tres imágenes, obtenés el HTML final listo para pegar en el CRM.
      </p>

      <div class="row g-4 align-items-start">
        <!-- IZQUIERDA: FORM + HTML -->
        <div class="col-lg-7">
          <div class="card-soft">
            <h3>1) Subir imágenes</h3>
            <p class="muted">
              Opciones:
              <br>• <b>Header + Cuerpo + Footer</b> (3 imágenes)
              <br>• <b>Solo 1 imagen de cuerpo</b> que ya incluya header/footer en el diseño.
            </p>

            <div id="cfgWarn" class="warn" style="display:none;"></div>

            <div class="mb-2">
              <label for="fileName">Nombre del archivo HTML</label>
              <input id="fileName" type="text" class="form-control" value="maipu-mail.html">
            </div>

            <div class="mb-2">
              <label for="bodyLink">Link (opcional) para la(s) imagen(es) del cuerpo</label>
              <input id="bodyLink" type="url" class="form-control" placeholder="https://www.maipu.gob.ar/...">
              <div class="muted">
                Si cargás 1 sola imagen (cuerpo completo) y ponés un link, toda la pieza será cliqueable.
              </div>
            </div>

            <div class="row g-3 mt-1">
              <div class="col-md-4">
                <div class="uploader-label">Header (opcional)</div>
                <input id="headerFile" type="file" accept="image/*" class="form-control">
              </div>
              <div class="col-md-4">
                <div class="uploader-label">Cuerpo (requerido si es única)</div>
                <input id="cuerpoFile" type="file" accept="image/*" class="form-control">
              </div>
              <div class="col-md-4">
                <div class="uploader-label">Footer (opcional)</div>
                <input id="footerFile" type="file" accept="image/*" class="form-control">
              </div>
            </div>

            <div class="mt-3 d-flex align-items-center gap-2 flex-wrap">
              <button id="btnGenerar" class="btn-base btn-primary-maipu" type="button">
                Subir y generar HTML
              </button>
              <span id="status" class="muted"></span>
            </div>
          </div>

          <div class="card-soft">
            <h3>2) HTML generado</h3>
            <textarea id="resultHtml" readonly></textarea>
            <div class="mt-2 d-flex flex-wrap gap-2">
              <button id="btnCopiar" class="btn-base btn-alt-green" type="button">Copiar HTML</button>
              <button id="btnDescargar" class="btn-base btn-alt-orange" type="button">Descargar</button>
              <!-- Botón que limpia todo -->
              <button id="btnReset" class="btn-base" type="button">Limpiar todo</button>
            </div>
          </div>
        </div>

        <!-- DERECHA: PREVIEW -->
        <div class="col-lg-5">
          <div class="card-soft">
            <h3>3) Vista previa</h3>
            <iframe id="preview" title="Vista previa del email" sandbox=""></iframe>
            <p class="muted mt-2">
              El HTML está maquetado listo para pegar en el CRM.
            </p>
          </div>
        </div>
      </div>

      <footer>
        Redes y Reclamos – Municipalidad de Maipú · Generador HTML CRM · NL.
      </footer>
    </section>
  </div>

  <!-- LÓGICA PRINCIPAL DEL GENERADOR -->
  <script type="module" src="./app.js"></script>

  <!-- Script extra solo para el botón "Limpiar todo" -->
  <script>
    (function(){
      const btnReset   = document.getElementById('btnReset');
      const headerFile = document.getElementById('headerFile');
      const cuerpoFile = document.getElementById('cuerpoFile');
      const footerFile = document.getElementById('footerFile');
      const resultHtml = document.getElementById('resultHtml');
      const status     = document.getElementById('status');
      const cfgWarn    = document.getElementById('cfgWarn');
      const preview    = document.getElementById('preview');

      if(!btnReset) return;

      btnReset.addEventListener('click', () => {
        // Limpiar inputs de imágenes
        if(headerFile) headerFile.value = '';
        if(cuerpoFile) cuerpoFile.value = '';
        if(footerFile) footerFile.value = '';

        // Limpiar HTML generado
        if(resultHtml) resultHtml.value = '';

        // Limpiar estado y aviso
        if(status){
          status.textContent = '';
          status.className = 'muted';
        }
        if(cfgWarn){
          cfgWarn.textContent = '';
          cfgWarn.style.display = 'none';
        }

        // Limpiar vista previa
        if(preview){
          preview.srcdoc = '';
        }
      });
    })();
  </script>
</body>
</html>
